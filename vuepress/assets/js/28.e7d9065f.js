(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{174:function(t,e,s){t.exports=s.p+"assets/img/cloud-deploy.1ff1d56a.png"},211:function(t,e,s){t.exports=s.p+"assets/img/template-1.2339fab1.png"},212:function(t,e,s){t.exports=s.p+"assets/img/template-2.3d98c381.png"},213:function(t,e,s){t.exports=s.p+"assets/img/page-add.21e334be.png"},214:function(t,e,s){t.exports=s.p+"assets/img/page-conflict.4c05aa0d.png"},215:function(t,e,s){t.exports=s.p+"assets/img/git-set.f9c08741.png"},216:function(t,e,s){t.exports=s.p+"assets/img/git-commit.607cf323.png"},217:function(t,e,s){t.exports=s.p+"assets/img/git-oss.a13ae329.png"},218:function(t,e,s){t.exports=s.p+"assets/img/cloud-build.043a8c4b.png"},219:function(t,e,s){t.exports=s.p+"assets/img/cloud-tag.500edfc1.png"},220:function(t,e,s){t.exports=s.p+"assets/img/cloud-update.75265d76.png"},283:function(t,e,s){"use strict";s.r(e);var i=s(0),r=Object(i.a)({},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[t._m(0),t._v(" "),i("p",[t._v("一个基于 "),i("code",[t._v("rush")]),t._v("、"),i("code",[t._v("pnpm")]),t._v("、"),i("code",[t._v("node")]),t._v(" 、"),i("code",[t._v("typescript")]),t._v(" 开发的高性能、易扩展脚手架。\n"),i("a",{attrs:{href:"https://github.com/GongJS/js-cli",target:"_blank",rel:"noopener noreferrer"}},[t._v("github"),i("OutboundLink")],1)]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._m(3),t._v(" "),i("p",[t._v("目前已开发完的命令有:")]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),i("p",[t._v("可供初始化的模板分为"),i("code",[t._v("项目")]),t._v("、"),i("code",[t._v("组件")]),t._v(" 两大类，以初始化一个项目为例, 运行"),i("code",[t._v("js-cli init")]),t._v("后选择 "),i("code",[t._v("项目")]),t._v(":\n"),i("img-wrapper",[i("img",{attrs:{src:s(211)}})]),t._v("\n填写项目名、版本内容后开始自动下载模板、安装依赖、启动项目:\n"),i("img-wrapper",[i("img",{attrs:{src:s(212)}})])],1),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),i("p",[t._v("日常开发中，在项目中引入新的组件是很常见的操作，但是对于更复杂的应用场景，可能是由多个组件组合而成的一个页面，"),i("code",[t._v("js-cli add")]),t._v(" 可在项目中直接引入一个新的页面，页面相关的文件都会被一起拷贝进项目里，新页面的依赖会和项目的依赖进行合并:\n"),i("img-wrapper",[i("img",{attrs:{src:s(213)}})]),t._v("\n在合并依赖的过程中，若项目依赖和页面依赖发生冲突，需要开发者手动解决。\n"),i("img-wrapper",[i("img",{attrs:{src:s(214)}})])],1),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),i("p",[t._v("发布命令实现的功能有:")]),t._v(" "),t._m(10),t._v(" "),i("p",[t._v("在第一次执行"),i("code",[t._v("js-cli")]),t._v("时，需要选择代码托管平台、仓库类型(个人/组织)以及对应平台的授权"),i("code",[t._v("token")]),t._v(":\n"),i("img-wrapper",[i("img",{attrs:{src:s(215)}})])],1),t._v(" "),i("p",[t._v("若检测到有代码未提交，脚手架会自动 "),i("code",[t._v("commit")]),t._v(" 并提示用户输入 "),i("code",[t._v("commit")]),t._v(" 信息:\n"),i("img-wrapper",[i("img",{attrs:{src:s(216)}})])],1),t._v(" "),i("p",[t._v("第一次发布还需要选择上传打包后代码的平台，目前仅支持 "),i("code",[t._v("oss")]),t._v(":\n"),i("img-wrapper",[i("img",{attrs:{src:s(217)}})])],1),t._v(" "),i("p",[t._v("开始进行云构建:\n"),i("img-wrapper",[i("img",{attrs:{src:s(218)}})])],1),t._v(" "),i("p",[t._v("发布构建产物:\n"),i("img-wrapper",[i("img",{attrs:{src:s(174)}})])],1),t._v(" "),i("p",[t._v("这样就把 "),i("code",[t._v("dev/1.0.0")]),t._v("的代码发布到了线上，若测试通过，这需要把 "),i("code",[t._v("dev/1.0.0")]),t._v("分支的代码合并到 "),i("code",[t._v("master")]),t._v(" 重新再发一遍，这时候需要加个参数，运行 "),i("code",[t._v("js-cli publish --prod")]),t._v(":\n"),i("img-wrapper",[i("img",{attrs:{src:s(174)}})])],1),t._v(" "),i("p",[t._v("发布完成后会删掉本地和远程的开发分支，并根据版本号打 "),i("code",[t._v("tag")]),t._v(" "),i("img-wrapper",[i("img",{attrs:{src:s(219)}})])],1),t._v(" "),i("p",[t._v("后续迭代新功能时，根据提示信息选择升级对应的版本:\n"),i("img-wrapper",[i("img",{attrs:{src:s(220)}})])],1),t._v(" "),t._m(11)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"js-cli"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#js-cli","aria-hidden":"true"}},[this._v("#")]),this._v(" js-cli")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("npm install @js-cli/core -g or yarn add @js-cli/core -g\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#命令","aria-hidden":"true"}},[this._v("#")]),this._v(" 命令")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("code",[t._v("js-cli init")]),t._v(": 根据模板始化项目")]),t._v(" "),s("li",[s("code",[t._v("js-cli add")]),t._v(": 在项目中添加页面")]),t._v(" "),s("li",[s("code",[t._v("js-cli publish")]),t._v(": 发布项目")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"init"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#init","aria-hidden":"true"}},[this._v("#")]),this._v(" init")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("模板下载成功后，会在用户根目录 "),e("code",[this._v(".js-cli")]),this._v(" 文件夹内进行缓存，后续在安装相同模板时，缓存好的模板会同线上版本进行比较，若缓存的版本为最新，则直接从缓存拷贝模板不再下载；若缓存的版本落后于线上，则从线上下载并更新缓存。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"add"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#add","aria-hidden":"true"}},[this._v("#")]),this._v(" add")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("新页面会拷贝到执行 "),e("code",[this._v("js-cli")]),this._v(" 命令的目录下。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"publish"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#publish","aria-hidden":"true"}},[this._v("#")]),this._v(" publish")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("Git\n"),s("ul",[s("li",[t._v("Git 远程仓库初始化（利用 Github & Gitee OpenAPI）")]),t._v(" "),s("li",[t._v("本地 Git 初始化")]),t._v(" "),s("li",[t._v("GitFlow 流程实现（自动提交代码、合并、推送分支、删除分支）")])])]),t._v(" "),s("li",[t._v("云发布模块\n"),s("ul",[s("li",[t._v("源码下载、依赖安装、打包构建")]),t._v(" "),s("li",[t._v("基于 websocket 的前后端通信")]),t._v(" "),s("li",[t._v("基于 redis 的任务系统")]),t._v(" "),s("li",[t._v("oss 文件上传")]),t._v(" "),s("li",[t._v("支持 hash 和 history 两种模式发布")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("除了 "),s("code",[t._v("--prod")]),t._v(" 参数外，"),s("code",[t._v("js-cli publish")]),t._v(" 还支持下列参数传递:\n"),s("code",[t._v("--refreshServer")]),t._v(": 强制更新远程Git仓库\n"),s("code",[t._v("--refreshToken")]),t._v(": 强制更新远程仓库token\n"),s("code",[t._v("--refreshOwner")]),t._v(": 强制更新远程仓库类型\n"),s("code",[t._v("--buildCmd")]),t._v(": 自定义构建命令,默认命令 "),s("code",[t._v("npm run build")]),t._v(" "),s("code",[t._v("--prod")]),t._v(": 是否正式发布\n"),s("code",[t._v("--sshUser")]),t._v(": 目标服务器用户名\n"),s("code",[t._v("--sshIp")]),t._v(": 目标服务器IP或域名\n"),s("code",[t._v("--sshPath")]),t._v(": 目标服务器存储构建产物的路径")])}],!1,null,null,null);e.default=r.exports}}]);